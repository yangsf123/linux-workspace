第八章  Linux磁盘与文件系统管理


需要碎片整理的原因是文件写入的block太过于离散了，此时文件读取的性能将会变得很差所致.通过碎片整理将同一个文件所属的block汇合在一起，这样数据的读取会比较容易。
FAT的文件系统需要经常碎片整理一下，Ext2的索引式文件系统，基本上不太需要经常进行碎片整理。


文件系统通常会将这两部分的数据分别存放在不同的块，权限与属性放置到inode中，至于实际数据则放置到data block块中。另外，有一个超级快(superblock)会记录整个文件系统的整体信息，包括inode与block的总量，使用量，剩余量等
每个inode与block都有编号

super block:记录此文件系统的整体信息，包括inode/block的总量，使用量，剩余量，以及文件系统的格式与相关信息等；
inode:记录文件的属性，一个文件占用一个inode，同时记录此文件的数据所在的block号码；
block:实际记录文件的内容，若文件太大时，会占用多个block


标准Linux系统Ext2就是使用这种inode为基础的文件系统

inode的内容用于记录文件的权限与相关属性，至于block块则是在记录文件的实际内容，而且文件系统一开始就将inode和block规划好了，除非重新格式化




挂载点(mount point):将文件系统与目录树结合的操作我们称为挂载

                    挂载点一定是目录，该目录为进入该文件系统的入口

                    文件系统最顶层的目录的inode通常为2号

                    一个文件占用一个inode，同一个文件系统的某个inode只会对应到一个文件内容而已




连接文件：ln

在Linux下的连接文件有两种：一种是类似Windows的快捷方式功能的文件，可以让你快速连接到目标文件(或目录)；
                            另一种是通过文件系统的inode连接来产生新的文件名，而不是产生新的文件，这种称为硬连接(hard link)

    hard link(硬连接或实际链接)
    hard link是指在某个目录下新建一条文件名连接到某inode号码的关联记录而已


    不能夸文件系统；
    不能连接到目录；
    symbolic link(符号链接，也即是快捷方式)：symbolic link就是在创建一个独立的文件，而这个文件会让数据的读取指向它连接的那个文件的文件名





8.3磁盘的分区，格式化，检验与挂载

如果我们想要在系统里新建一块硬盘时，应该有哪些动作需要做呢：
1.对磁盘进行分区，以新建可用的分区
2.对该分区进行格式化(format)，以创建系统可用的文件系统
3.若想要仔细一点，则可对刚才新建好的系统进行检验
4.在Linux系统上，需要创建挂载点（也即是目录），并将它挂载上来




8.5内存交换空间(swap)构建
安装Linux系统时一定需要的两个分区：根目录，swap
swap的功能就是在应付物理内存不足的情况下所造成的内存扩展记录的功能
CPU所读取的数据来自于内存，当内存不足时，为了让后续的程序可以顺利运行，因此在内存中暂时不使用的程序与数据都会被挪到swap中。此时内存就会空出来给需要执行的程序加载。
由于swap是用硬盘来暂时存放内存中的信息，所以用到swap时，主机硬盘灯就会闪个不停

创建swap方法：设置一个swap分区；创建一个虚拟内存的文件



